<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet"> 
        <link rel="stylesheet" type="text/css" href="../css/unir.css">
        <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z'/%3E%3C/svg%3E">        
        <script src="../js/unir.js"></script>
        <title>Join rooms</title>
    </head>
    <body>
        <div class="topnav">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-arrow-return-left mx-3 logo" onClick="goToMenu()" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z"/>
              </svg>
            <img src="../img/vueling_logo2.png" width="90" height="50" alt="" onClick="goToMenu()" class="logo">
        </div>
        <h2 class="title">
            <div class="username-text">
                <p class="pt-5"><b>CHOOSE A ROOM TO JOIN</b></p>
            </div>
        </h2>
        <div class="pb-5 pt-2 px-5 centrar">
            <table class="" id="menu">
                <thead>
                    <tr>
                        <th class="font-title">Room's name</th>
                        <th class="font-title">Room capacity</th>
                        <th class="font-title">Join?</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <script>
            function generateMenu() {
                var roomMapJSON = localStorage.getItem("roomMap");
                var roomMap = new Map(JSON.parse(roomMapJSON));
                var tableBody = document.querySelector("#menu tbody");
                console.log(roomMap);

                roomMap.forEach((value, key) => {
                    if (value.length < 8)
                    {
                        var row = tableBody.insertRow(-1);
                        var nameCell = row.insertCell(0);
                        var capacityCell = row.insertCell(1);
                        var insertButton = row.insertCell(2);
                        nameCell.innerHTML = key;
                        nameCell.className = "font-txt";
                        capacityCell.innerHTML = value.length+"/8";
                        capacityCell.className = "font-txt font-txt-green";
                        insertButton.innerHTML = '<button type="button" href="crear.html" class="btn btn-secondary btn-outline-dark text-white">Join Party</button>';
                        insertButton.setAttribute("onclick", "joinRoom('" + key + "')");
                    }
                    //insertButton.innerHTML = '<a href="./crear.html" class="btn btn-secondary btn-outline-dark text-white">Join Party</a>';
                    // insertButton = document.createElement("button");
                    // insertButton.textContent = "Join Party";
                    // insertButton.onclick = function() {
                    //     window.location.href = "play.html";
                    // };
                    // insertButton.className = "join-button";
                    // insertButton.setAttribute("type", "button");
                    // insertButtonWrapper = document.createElement("div"); 
                    // insertButtonWrapper.className = "join-button-wrapper";
                    // insertButtonWrapper.appendChild(insertButton); 
                });
            }
            generateMenu();
        </script>

        <!-- <div class="pt-5 but-right">
            <a href="../html/play.html" id="formulario" class="btn btn-secondary btn-outline-dark text-white boton">Play</a>
        </div> -->
    </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" 
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
</html>